<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="zh-cn"><head><meta charset="UTF-8"><meta name="copyright" content="(C) 版权 2024"><meta name="generator" content="DITA-OT"><meta name="description" content=""><title>tcp/ip模型</title><link rel="stylesheet" type="text/css" href="../../commonltr.css"></head><body id="TcpIp模型-34C8F4F7"><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">tcp/ip模型</h1>


<div class="body conbody"><p class="shortdesc"></p>
<p class="p">一，概述</p>
<p class="p">TCP/IP参考模型是一个抽象的分层模型，这个模型中，所有的TCP/IP系列网络协议都被归类到4个抽象的”层”中。每一抽象层建立在低一层提供的服务上，并且为高一层提供服务。</p>
<p class="p">完成一些特定的任务需要众多的协议协同工作，这些协议分布在参考模型的不同层中的，因此有时称它们为一个协议栈。</p>
<p class="p">TCP/IP参考模型为TCP/IP协议(或称为TCP/IP协议栈，或互联网协议系列。)订身制作。其中IP协议只关心如何使得数据能够跨越本地网络边界的问题，而不关心如何利用传输媒体，数据如何传输。整个TCP/IP协议栈则负责解决数据如何通过许许多多个点对点通路（一个点对点通路，也称为一”跳”,
1 hop)顺利传输，由此不同的网络成员能够在许多”跳”的基础上建立相互的数据通路。</p>
<p class="p">如想分析更普遍的网络通信问题，ISO的OSI模型也能起更好的帮助作用。</p>
<p class="p">因特网协议组是一组实现支持因特网和大多数商业网络运行的协议栈的网络传输协议。它有时也被称为TCP/IP协议组，这个名称来源于其中两个最重要的协议：传输控制协议（TCP）和因特网协议（IP），它们也是最先定义的两个协议。</p>
<p class="p">同许多其它协议一样网络传输协议也可以看作一个多层组合，每层解决数据传输中的一组问题并且向使用这些低层服务的高层提供定义好的服务。高层逻辑上与用户更为接近，所处理数据更为抽象，它们依赖于低层将数据转换成最终能够进行物理控制的形式。</p>
<p class="p">网络传输协议能够大致匹配到一些厂商喜欢使用的固定7层的OSI模型。然而并不是所有这些层能够很好地与基于ip的网络对应（根据应用的设计和支持网络的不同它们确实是涉及到不同的层）并且一些人认为试图将因特网协以组对应到OSI会带来混淆而不是有所帮助。</p>
<p class="p">二，分层</p>
<p class="p">TCP/IP参考模型分为四层：应用层（Application Layer）、传输层（Transport Layer）、网络层（Internet
Layer）、链路层（Link Layer）。</p>
<table class="table"><caption></caption><colgroup><col><col><col><col><col><col></colgroup><tbody class="tbody">
<tr class="row">
<td class="entry" rowspan="1" colspan="2"><p class="p">TCP/IP分层</p></td>
<td class="entry" rowspan="1" colspan="2"><p class="p">协议</p></td>
<td class="entry" rowspan="1" colspan="2"><p class="p">OSI 分层</p></td>
</tr>
<tr class="row">
<td class="entry" rowspan="1" colspan="2"><p class="p">应用层</p></td>
<td class="entry" rowspan="1" colspan="2"><p class="p">FTP,SMTP,Telnet,DNS,SNMP</p></td>
<td class="entry" rowspan="1" colspan="2"><p class="p">7</p></td>
</tr>
<tr class="row">
<td class="entry" rowspan="1" colspan="2"><p class="p">传输层</p></td>
<td class="entry" rowspan="1" colspan="2"><p class="p">TCP,UDP</p></td>
<td class="entry" rowspan="1" colspan="2"><p class="p">4</p></td>
</tr>
<tr class="row">
<td class="entry" rowspan="1" colspan="2"><p class="p">网络层</p></td>
<td class="entry" rowspan="1" colspan="2"><p class="p">IP, ICMP,(RIP,
OSPF),ARP, RARP</p></td>
<td class="entry" rowspan="1" colspan="2"><p class="p">3</p></td>
</tr>
<tr class="row">
<td class="entry" rowspan="1" colspan="2"><p class="p">链路层</p></td>
<td class="entry" rowspan="1" colspan="2"><p class="p">Ethernet,Token
Bus,Token Ring,FDDI,WLAN</p></td>
<td class="entry" rowspan="1" colspan="2"><p class="p">2,1</p></td>
</tr>
</tbody></table>
<p class="p">1，应用层</p>
<p class="p">该层包括所有和应用程序协同工作，利用基础网络交换应用程序专用的数据的协议。如,</p>
<p class="p"><a class="xref" href="http://www.deepcast.net/wiki/https" target="_blank" rel="external noopener">HTTPS</a>(Hypertext Transfer Protocol over Secure
Socket Layer, or&nbsp;HTTP&nbsp;over&nbsp;SSL),安全超文本传输协议。</p>
<p class="p"><a class="xref" href="http://www.deepcast.net/wiki/http" target="_blank" rel="external noopener">HTTP</a><strong class="ph b">(Hypertext Transfer Protocol),超文本传输协议。</strong></p>
<p class="p"><a class="xref" href="http://www.deepcast.net/wiki/telnet" target="_blank" rel="external noopener">TELNET</a><strong class="ph b">&nbsp;</strong><strong class="ph b">(Teletype over the Network,
网络电传) ，通过一个终端(terminal)登陆到网络(运行在TCP协议上)。</strong></p>
<p class="p"><a class="xref" href="http://www.deepcast.net/wiki/ftp" target="_blank" rel="external noopener">FTP</a><strong class="ph b">&nbsp;</strong><strong class="ph b">(File Transfer Protocol,
文件传输协议) ，由名知义(运行在TCP协议上) 。</strong></p>
<p class="p"><a class="xref" href="http://www.deepcast.net/wiki/smtp" target="_blank" rel="external noopener">SMTP</a><strong class="ph b">&nbsp;</strong><strong class="ph b">(Simple Mail Transfer
Protocol，简单邮件传输协议) ，用来发送电子邮件(运行在TCP协议上) 。</strong></p>
<p class="p"><a class="xref" href="http://www.deepcast.net/wiki/dns" target="_blank" rel="external noopener">DNS</a><strong class="ph b">&nbsp;</strong><strong class="ph b">(Domain Name Service，域名服务)
，用于完成地址查找，邮件转发等工作(运行在TCP和UDP协议上) 。</strong></p>
<p class="p"><a class="xref" href="http://www.deepcast.net/wiki/ntp" target="_blank" rel="external noopener">NTP</a><strong class="ph b">&nbsp;</strong><strong class="ph b">(Network Time Protocol，网络时间协议)
，用于网络同步(运行在UDP协议上) 。</strong></p>
<p class="p"><a class="xref" href="http://www.deepcast.net/wiki/snmp" target="_blank" rel="external noopener">SNMP</a><strong class="ph b">&nbsp;</strong><strong class="ph b">(Simple Network Management
Protocol, 简单网络管理协议) ，用于网络信息的收集和网络管理。</strong></p>
<p class="p">2，传输层</p>
<p class="p">该层提供端对端的通信。最重要的传输层协议是传输控制协议TCP。</p>
<p class="p">传输控制协议TCP (Transport Control Protocol) - 数据流传输（面向连接，可靠）</p>
<p class="p">用户数据报文协议UDP (User Datagram Protocol) - 数据报文传输(无连接不可靠)</p>
<p class="p">3，网络层</p>
<p class="p">该层负责数据转发和路由。从该层上面往下看，可以认为底下存在的是一个不可靠无连接的端对端的数据通路。最核心的协议当然是IP协议。此外还有ICMP，RIP,OSPF,IS-IS,BGP,ARP,RARP等。</p>
<p class="p">三，因特网协议栈中的层</p>
<p class="p">人们已经进行了一些讨论关于如何将TCP/IP参考模型映射到到OSI模型。由于TCP/IP和OSI模型组不能精确地匹配，还没有一个完全正确的答案。</p>
<p class="p">另外，OSI模型下层还不具备能够真正占据真正层的位置的能力；在传输层和网络层之间还需要另外一个层（网络互连层）。特定网络类型专用的一些协议应该运行在网络层上，但是却运行在基本的硬件帧交换上。类似协议的例子有地址解析协议和生成树协议（用来保持冗余网桥的空闲状态直到真正需要它们）。然而，它们是本地协议并且在网络互连功能下面运行。不可否认，将两个组（更不用说它们只是运行在如ICMP等不同的互连网络协议上的逻辑上的网络层的一部分）整个放在同一层会引起混淆，但是OSI模型还没有复杂到能够做更好的工作。</p>
<p class="p">下面的图表试图显示不同的TCP/IP和其它的协议在最初OSI模型中的位置：</p>
<p class="p">7 应用层 例如HTTP、SMTP、SNMP、FTP、Telnet、SIP、SSH、NFS、RTSP、XMPP、Whois、ENRP</p>
<p class="p">6 表示层 例如XDR、ASN.1、SMB、AFP、NCP</p>
<p class="p">5 会话层 例如ASAP、TLS、SSH、ISO 8327 / CCITT X.225、RPC、NetBIOS、ASP、Winsock、BSD
sockets</p>
<p class="p">4 传输层 例如TCP、UDP、RTP、SCTP、SPX、ATP、IL</p>
<p class="p">3 网络层 例如IP、ICMP、IGMP、IPX、BGP、OSPF、RIP、IGRP、EIGRP、ARP、RARP、 X.25</p>
<p class="p">2 数据链路层 例如Ethernet、Token ring、HDLC、Frame relay、ISDN、ATM、802.11
WiFi、FDDI、PPP</p>
<p class="p">1 物理层 例如wire、radio、fiber optic、Carrier pigeon</p>
<p class="p">通常人们认为OSI模型的最上面三层（应用层、表示层和会话层）在TCP/IP组中是一个应用层。由于TCP/IP有一个相对较弱的会话层，由TCP和
RTP下的打开和关闭连接组成，并且在TCP和UDP下的各种应用提供不同的端口号，这些功能能够被单个的应用程序（或者那些应用程序所使用的库）增加。与此相似的是，IP是按照将它下面的网络当作一个黑盒子的思想设计的，这样在讨论TCP/IP的时候就可以把它当作一个独立的层。</p>
<p class="p">4 应用层（OSI5 到 7层）例如HTTP、FTP、DNS（如BGP和RIP这样的路由协议，尽管由于各种各样的原因它们分别运行在TCP和UDP上，仍然可以将它们看作网络层的一部分）</p>
<p class="p">3 传输层（OSI4 和 5层）例如TCP、UDP、RTP、SCTP（如OSPF这样的路由协议，尽管运行在IP上也可以看作是网络层的一部分）</p>
<p class="p">2 网络互连层(OSI3层) 对于TCP/IP来说这是因特网协议（IP）（如ICMP和IGMP这样的必须协议尽管运行在IP上，也仍然可以看作是网络互连层的一部分；ARP不运行在IP上）</p>
<p class="p">1 链接层(OSI1和2层) 例如Ethernet、Wi-Fi、MPLS等。</p>
<p class="p">1，链路层</p>
<p class="p">链路层实际上并不是因特网协议组中的一部分，但是它是数据包从一个设备的网络层传输到里另外一个设备的网络层的方法。这个过程能够在网卡的软件驱动程序中控制，也可以在韧体或者专用芯片中控制。这将完成如添加报头准备发送、通过物理媒介实际发送这样一些数据链路功能。另一端，链路层将完成数据帧接收、去除报头并且将接收到的包传到网络层。</p>
<p class="p">然而，链路层并不经常这样简单。它也可能是一个虚拟专有网络（VPN）或者隧道，在这里从网络层来的包使用隧道协议和其它（或者同样的）协议组发送而不是发送到物理的接口上。VPN和隧道通常预先建好，并且它们有一些直接发送到物理接口所没有的特殊特点（例如，它可以加密经过它的数据）。由于现在链路“层”现在是一个完整的网络，这种协议组的递归使用可能引起混淆。但是它是一个实现常见复杂功能的一个优秀方法。（尽管需要注意以防一个已经封装并且经隧道发送下去的数据包进行再次地封装和发送）。</p>
<p class="p">2，网络层</p>
<p class="p">正如最初所定义的，网络层解决在一个单一网络上传输数据包的问题。类似的协议有X.25和ARPANET的Host/IMP Protocol。</p>
<p class="p">随着因特网思想的出现，在这个层上添加了附加的功能，也就是将数据从源网络传输到目的网络。这就牵涉到在网络组成的网上选择路径将数据包传输，也就是因特网。</p>
<p class="p">在因特网协议组中，IP完成数据从源发送到目的基本任务。IP能够承载多种不同的高层协议的数据；这些协议使用一个唯一的IP协议号进行标识。ICMP和IGMP分别是1和2。</p>
<p class="p">一些IP承载的协议，如ICMP（用来发送关于IP发送的诊断信息）和IGMP（用来管理多播数据），它们位于IP层之上但是完成网络层的功能，这表明了因特网和OSI模型之间的不兼容性。所有的路由协议，如BGP、
OSPF、和RIP实际上也是网络层的一部分，尽管似乎它们应该属于更高的协议栈。</p>
<p class="p">3，传输层</p>
<p class="p">传输层的协议能够解决诸如可靠性（“数据是否已经到达目的地？”）和保证数据按照正确的顺序到达这样的问题。在TCP/IP协议组中，传输协议也包括所给数据应该送给哪个应用程序。</p>
<p class="p">在TCP/IP协议组中技术上位于这个层的动态路由协议通常被认为是网络层的一部分；一个例子就是OSPF（IP协议89）。</p>
<p class="p">TCP（IP协议6）是一个“可靠的”、面向连结的传输机制，它提供一种可靠的字节流保证数据完整、无损并且按顺序到达。TCP尽量连续不断地测试网络的负载并且控制发送数据的速度以避免网络过载。另外，TCP试图将数据按照规定的顺序发送。这是它与UDP不同之处，这在实时数据流或者路由高网络层丢失率应用的时候可能成为一个缺陷。</p>
<p class="p">较新的SCTP也是一个“可靠的”、面向连结的传输机制。它是面向纪录而不是面向字节的，它在一个单独的连结上提供了通过多路复用提供了多个子流。它也提供了多路自寻址支持，其中连结终端能够被多个IP地址表示（代表多个物理接口），这样的话即使其中一个失败了连接也不中断。它最初是为电话应用开发的（在IP上传输SS7），但是也可以用于其它的应用。</p>
<p class="p">UDP（IP协议号17）是一个无连结的数据报协议。它是一个“best effort”或者“不可靠”协议——不是因为它特别不可靠，而是因为它不检查数据包是否已经到达目的地，并且不保证它们按顺序到达。如果一个应用程序需要这些特点，它必须自己提供或者使用TCP。</p>
<p class="p">UDP的典型性应用是如流媒体（音频和视频等）这样按时到达比可靠性更重要的应用，或者如DNS查找这样的简单查询/响应应用，如果建立可靠的连结所作的额外工作将是不成比例地大。</p>
<p class="p">DCCP目前正由IEFT开发。它提供TCP流动控制语义，但对于用户来说保留了UDP的数据报服务模型。</p>
<p class="p">TCP和UDP都用来支持一些高层的应用。任何给定网络地址的应用通过它们的TCP或者UDP端口号区分。根据惯例一些大众所知的端口与特定的应用相联系。</p>
<p class="p">RTP是为如音频和视频流这样的实时数据设计的数据报协议。RTP是使用UDP包格式作为基础的会话层，然而据说它位于因特网协议栈的传输层。</p>
<p class="p">4，应用层</p>
<p class="p">应用层是大多数普通与网络相关的程序为了通过网络与其它程序通信所使用的层。这个层的处理过程是应用特有的；数据从网络相关的程序的以这种应用内部使用的格式的传过来，然后被编码成标准协议的格式。</p>
<p class="p">一些特定的程序被认为运行在这个层上。它们提供服务直接支持用户应用。这些程序和它们对应的协议包括HTTP（The World Wide
Web）、FTP（文件传输）、SMTP（电子邮件）、SSH（安全远程登陆）、DNS （名称↔ IP 地址寻找）以及许多其它协议。</p>
<p class="p">一旦从应用程序来的数据被编码成一个标准的应用层协议，它将被传送到IP栈的下一层。</p>
<p class="p">在传输层，应用程序最常用的是TCP或者UDP，并且服务器应用程序经常与一个公开的端口号相联系。服务器应用程序的端口由Internet
Assigned Numbers Authority （IANA）正式地分配，但是现今一些新协议的开发者经常选择它们自己的端口号。由于在同一个系统上很少超过少数几个的服务器应用，端口冲突引起的问题很少。应用软件通常也允许用户强制性地指定端口号作为运行参数。</p>
<p class="p">连结外部的客户端程序通常使用系统分配的一个随机端口号。监听一个端口并且然后通过服务器将那个端口发送到应用的另外一个副本以建立对等连结（如IRC上的dcc文件传输）的应用也可以使用一个随机端口，但是应用程序通常允许定义一个特定的端口范围的规范以允许端口能够通过实现网络地址翻译的路由器映射到内部。</p>
<p class="p">五，开发</p>
<p class="p">因特网协议组来自于二十世纪七十年代早期DARPA所作的工作。在构建了APRANET先驱之后，DARPA开始了其它数据传输技术的研究。1972年，Robert
E. Kahn被DARPA的信息技术处理办公室雇佣，在那里他研究卫星数据包网络和地面无线数据包网络，并且意识到能够在它们之间沟通的价值。在1973年春天，已有的ARPANET网络控制程序（NCP）协议的开发者Vinton
Cerf加入到Kahn为ARPANET设计下一代协议而开发开放互连模型的工作中。</p>
<p class="p">到了1973年夏天，Kahn和Cerf很快就开发出了一个基本的改进形式，其中网络协议之间的不同通过使用一个公用互联网络协议而隐藏起来，并且可靠性由主机保证而不是象ARPANET那样由网络保证。（Cerf
称赞Hubert Zimmerman和Louis Pouzin（CYCLADES网络的设计者）在这个设计上发挥了重要影响。）</p>
<p class="p">由于网络的作用减少到最小的程度，就有可能将任何网络连接到一起，而不用管它们不同的特点，这样就解决了Kahn最初的问题。（一个流行的说法提到Cerf和Kahn工作的最终产品TCP/IP将在运行“两个罐子和一根弦”上，实际上它已经用在信鸽上。一个称为网关（后来改为路由器以免与另外一种网关混淆）的计算机为每个网络提供一个接口并且在它们之间来回传输数据包。</p>
<p class="p">这个设计思想更细的形式由Cerf在斯坦福的网络研究组的1973年–74年期间开发出来。（处于同一时期的诞生了PARC通用包协议组的施乐PARC早期网络研究工作也有重要的技术影响；人们在两者之间摇摆不定。）</p>
<p class="p">DARPA于是与BBN、斯坦福和伦敦大学签署了协议开发不同硬件平台上协议的运行版本。有四个版本被开发出来——TCP v1、TCP
v2、在1978年春天分成TCP v3和IP v3的版本，后来就是稳定的TCP/IP v4——目前因特网仍然使用的标准协议。</p>
<p class="p">1975年，两个网络之间的TCP/IP通信在斯坦福和伦敦大学（UCL）之间进行了测试。1977年11月，三个网络之间的TCP/IP测试在美国、英国和挪威之间进行。在1978年到1983年间，其它一些TCP/IP原型在多个研究中心之间开发出来。ARPANET完全转换到TCP/IP在
1983年1月1日发生。[1]</p>
<p class="p">1984年，美国国防部将TCP/IP作为所有计算机网络的标准。1985年，因特网架构理事会举行了一个三天有250家厂商代表参加的关于计算产业使用TCP/IP的工作会议，帮助协议的推广并且引领它日渐增长的商业应用。</p>
<p class="p">2005年9月9日Kahn和Cerf由于他们对于美国文化做出的卓越贡献被授予总统自由勋章。[2]</p>
<p class="p">六，IP网怎样吃掉竞争的网络</p>
<p class="p">在长期的发展过程中，IP逐渐取代其它网络。这里是一个简单的解释。IP传输通用数据。数据能够用于任何目的，并且能够很轻易地取代以前由专有数据网络传输的数据。下面是一个普通的过程：</p>
<p class="p"> 1. 一个专有的网络开发出来用于特定目的。如果它工作很好，用户将接受它。  2. 为了便利提供IP服务，经常用于访问电子邮件或者聊天，通常以某种方式通过专有网络隧道实现。隧道方式最初可能非常没有效率，因为电子邮件和聊天只需要很低的带宽。
 3. 通过一点点的投资IP 基础设施逐渐在专有数据网络周边出现。  4. 用IP取代专有服务的需求出现，经常是一个用户要求。  5.
IP替代品过程遍布整个因特网，这使IP替代品比最初的专有网络更加有价值（由于网络效应）。  6. 专有网络受到压制。许多用户开始维护使用IP替代品的复制品。
 7. IP包的间接开销很小，少于1%，这样在成本上非常有竞争性。人们开发了一种能够将IP带到专有网络上的大部分用户的不昂贵的传输媒介。
 8. 大多数用户为了削减开销专有网络被取消。  9. 专有网络的死党被迫接受。</p>
<p class="p">七，实现</p>
<p class="p">如今，大多数商业操作系统包括TCP/IP栈并且缺省安装它们，对于大多数用户来说，没有必要去寻找它们的实现。TCP/IP包含在所有的商业Unix和Linux发布包中，同样也包含在Mac&nbsp;OS&nbsp;X和微软视窗和视窗服务器版本中。</p>
<p class="p"><a class="xref" href="http://www.tektalk.org/2011/06/09/tcpip-sharing-3/" target="_blank" rel="external noopener">TCP/IP Sharing – 3|</a></p>
</div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>父主题：</strong> <a class="link" href="%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1.html" title="管理信息库和企业简单网络管理协议">网络通信</a></div></div></nav></article></main></body></html>