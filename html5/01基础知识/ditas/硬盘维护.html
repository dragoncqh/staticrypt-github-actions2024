<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="zh-cn"><head><meta charset="UTF-8"><meta name="copyright" content="(C) 版权 2024"><meta name="generator" content="DITA-OT"><meta name="description" content=""><title>硬盘维护</title><link rel="stylesheet" type="text/css" href="../../commonltr.css"></head><body id="硬盘维护-3487F991"><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">硬盘维护 </h1>


<div class="body conbody"><p class="shortdesc"></p>
<p class="p">一，概述</p>
<p class="p">硬盘的分区与格式化属于“危险”操作，初学者必须要有这个概念。之所以危险，是因为这个操作将毁掉硬盘上的所有数据(当然，现在也有可以在不破坏数据的情况下重建分区的工具——这是特例)，因此，要谨慎对待。</p>
<p class="p">但是，在某些情况下，计算机瘫痪了，你不得不对硬盘实施这个“手术”。事实上，对硬盘的分区和格式化也是掌握个人电脑的基本功。如果你是自己动手组装电脑，硬盘的分区和格式化更是必不可少的步骤。在这一节，我们就来学习如何对硬盘进行分区和格式化。</p>
<p class="p">我们以一个新硬盘的分区和格式化来说明这个过程。旧硬盘的分区和格式化与此类似，可参照执行。</p>
<p class="p">二，硬盘分区</p>
<p class="p">● 首先进入CMOS设置，利用CMOS中自动检测硬盘的选项，检测硬盘参数并记录下测试的数据，以备丢失硬盘参数时使用。</p>
<p class="p">● 用“Win98启动盘”重新启动计算机。注意，不要用“DOS启动盘”，因为它不支持大容量硬盘。</p>
<p class="p">● 在A:\&gt;提示符下，键入：fdisk(回车)，即可执行启动盘中的硬盘分区命令。</p>
<p class="p">● 当进入fdisk程序时，出现图1所示界面(注：图1～3均为黑底白字，为便于观看，将其处理为白底黑字)。</p>
<p class="p">该界面提示你：“你的计算机具有一个大于512MB的硬盘。该Windows版本支持大容量硬盘，在此情况下，可以更有效地利用磁盘空间，并且允许单个驱动器容量超过2GB。”，
“如果你能使大硬盘支持并在磁盘上建立新的驱动器，其他操作系统，包括某些版本的Windows 95和Windows NT及MSDOS将不能访问新驱动器。另外，非FAT32文件系统也不能在这个盘上工作。”，“你是否能使大容量硬盘支持?(Y/N)”。</p>
<p class="p">默认选择为“Y”(是)。如果你的硬盘大于8MB，这是唯一的选择，否则，多出的硬盘空间无法使用。</p>
<p class="p">当你确定后，按回车键即进入图2所示的主菜单。</p>
<p class="p">在图2中，根据你计算机的配置，会出现4～5个选项，它们是：</p>
<p class="p">　　1.Create DOS partition or Logical DOS Drive(建立DOS分区或逻辑驱动器)； 
　　2.Set active partition(设置激活分区)；  　　3.Delete partition or Logical
DOS Drive(删除分区或逻辑驱动器)；  　　4.Display partition information(显示分区信息)；
 　　5.Change current fixed disk Drive(改变当前驱动器)。</p>
<p class="p">分区步骤如下：</p>
<p class="p">● 如果你计算机中有2个以上的硬盘，应首先在“Enter choice(进入选择)”中输入5，选择待分区的硬盘。选择后，按Esc键返回主菜单。</p>
<p class="p">● 进入4，显示分区信息，看所选硬盘是否有误。然后，按Esc键返回主菜单。当然，如果是新盘，就不用做这一步了。</p>
<p class="p">● 进入1，这是硬盘分区程序的主要入口。随之出现下级菜单如图3所示。</p>
<p class="p">在下级菜单中，有3个选项：</p>
<p class="p">1.Create Primary DOS partition(建立主分区)；  .Create Extended DOS partition(建立扩展分区)；
 3.Create Logical DOS Drive(s) in the Extended DOS partition  (在扩展分区中建立逻辑驱动器)。</p>
<p class="p">注意，分区操作的要点是：先按预定空间建立主分区；然后，以剩余的全部空间建立扩展分区；最后，在扩展分区中，建立若干个逻辑驱动器，用尽所有扩展分区空间。</p>
<p class="p">在进入下级菜单完成操作后，按Esc键返回上级菜单，继续操作，分区完毕后，按Esc键返回主菜单。</p>
<p class="p">注意，在每级子菜单中，可按Esc键返回上级菜单。在主菜单中按Esc键，则退出分区程序。</p>
<p class="p">● 在主菜单中选择2，使主分区激活。</p>
<p class="p">● 重启计算机，再次进入启动盘A：\&gt;。</p>
<p class="p">● 用启动盘中的Format命令，格式化分区后的硬盘主分区(C：)和逻辑驱动器(D：、E：、F：…)。</p>
<p class="p">至此，硬盘的分区和格式化完毕，一个“新”硬盘可以使用了。</p>
<p class="p">如果是对一个已经分区的硬盘重新分区，你首先必须进入主菜单的“Delete partition or logical DOS driver”选项，删除原有的分区。删除操作要点是：首先删除逻辑驱动器，然后删除扩展分区，最后删除主分区。在删除完分区后，你才可以按前面介绍的方法，重新对硬盘进行分区。</p>
<p class="p">另外，如果机器中有两个以上的硬盘，除第1硬盘外，其他硬盘可以不要主分区。即是说，将硬盘的所有空间均作为扩展分区，然后再将它分为几个逻辑驱动器，格式化即可(不需激活任何分区)。这样可以避免“盘符交错”的问题。</p>
<p class="p">三，格式化硬盘</p>
<p class="p">格式化硬盘的操作，比起分区来说就简单多了。其实，在前面的分区与格式化硬盘操作中已经做了：</p>
<p class="p">● 在软驱中插入Win98启动盘，重启计算机；</p>
<p class="p">● 利用启动盘中的Format命令，进行格式化：</p>
<p class="p">在A：〉提示符下键入：format x:，然后按回车键即可对x(x=c,d,e,…，待格式化的盘符)驱动器进行格式化。此时系统会提示你：“格式化操作将毁掉驱动器的所有数据，继续吗?”，如果你回答“Y”，格式化操作继续进行，几分钟后，驱动器就成了一张“白纸”。如果在提问时你回答“N”，格式化程序立即退出，不进行格式化操作。</p>
<p class="p">另外，你还可以为格式化命令带参数，比如：</p>
<p class="p">format c:/s，让程序在格式化完成后，再传送系统文件给该驱动器，使其成为可引导的驱动器；</p>
<p class="p">format c:/q，快速格式化，只重建文件分配表，不清理数据区，数秒内即可完成格式化。如果是对新盘做第一次格式化，最好不要带此参数。</p>
<p class="p">格式化可带的参数还有许多，可参考DOS命令手册。</p>
<p class="p">最后，再次提醒你，分区和格式化是可能会毁掉硬盘数据的操作，你必须三思而后行。</p>
<p class="p">===== 四，高级工具 =====<a class="xref" href="http://example.com/" target="_blank" rel="external noopener"><strong class="ph b">外部链接</strong></a></p>
<p class="p">硬盘工具:</p>
<p class="p">硬盘分区管理工具：</p>
<p class="p">Partition Magic和Paragon Partition Manager</p>
<p class="p">　一、两个软件的安装和使用都非常简单。其中PQ不支持WIN NT Server/2000 Servers，而PM可以工作在WindowsNT/2000/XP
(servers and workstations）上。</p>
<p class="p">　二、两个软件都支持DOS环境，但DOS盘制作方法不同。</p>
<p class="p">　三、在对磁盘进行操作前都要做准备工作。在执行PQ或PM之前最好运行一下磁盘检测程序，如Scandisk或Norton Utilities中的Disk
Doctor先检查一下磁盘确保PQ/PM运行中不被意外中断。 在使用PM前要特别注意，这个软件虽然支持中文的文件名，但这是需要设置的。运行PM后在“Hard
Disk（硬盘）”菜单下选择“Settings（设置）”菜单，然后在弹出窗口的“Locale Info（本地信息）”选项卡下设置时区为+8区，并设置“Filenames（文件名）”下拉菜单为“936
Chinese PRC”。</p>
<p class="p">　四、两个软件在功能上各有所长</p>
<p class="p">　　1.创建／删除分区　</p>
<p class="p">　　2.无损数据改变分区大小或移动分区位置</p>
<p class="p">　　3.合并／拆分分区</p>
<p class="p">　　4.转换分区的文件格式和分区类型:PQ对中文的文件名和文件夹名不支持，如果强行用英文版PQ Magic把包含中文目录和文件名的NTFS分区转换成FAT32，转换后，其中所有的中文目录名称都会变成问号而且无法访问，虽然有挽回的办法，但是非常麻烦。</p>
<p class="p">　五、Paragon Partition Manager宣称可以操作动态卷并具有断电保护功能</p>
<p class="p">　六、总结与比较</p>
<p class="p">Paragon Partition Manager具有支持多种语言，支持动态卷，而且有断电保护功能的优点，而PartitionMagic在易用性方面有优势：Paragon
Partition Manager中不并能一次设置好后一起应用，而是要一个一个分别进行，显得很浪费时间。而在PartitionMagic中可以一次设置多个操作并挂起，然后同时应用，节省了大量时间。Paragon
Partition Manager安装包只有8M，但是运行时非常占用资源，而PartitionMagic的安装包有33M大小，反而占用资源不大，提醒使用者在执行
Paragon Partition Manager的同时，最好关闭其它的应用程序，否则可能会造成程序的执行错误而导致磁盘资料的损毁，请务必小心使用！</p>
<p class="p">让Pqmagic在Win2000 Server版中运行</p>
<p class="p">　　“Partition Magic无法在Windows NT/Windows 2000 Server上运行”，</p>
<p class="p">　　关键在于Boot.ini文件 　　１，服务器版：“Advanced Server” 　　２，专业版：“Professional”
　　Pqmagic就是靠Boot.ini文件这一不同来判断Windows 2000的版本，来决定是否运行，于是我把服务器版的Boot.ini文件中的“Advanced
Server”改成“Professional”，可是这次Pqmagic还是无法运行。最后发现专业版中的“=”的前后各有一个空格，而服务器版上却没有空格，于是我在服务器版的Boot.ini文件中加上了这两个空格，然后再运行Pqmagic，这次终于没再出现那个错误提示了。估计这是微软公司为了区分专业版和服务器版的，故意留下的记号，而Pqmagic就利用这个记号来让自己不在服务器版下运行，这可能是为了保证Server版稳定运行的一个方法。
修改以后完全不影响Windows 2000的运行。</p>
<p class="p"></p>
<p class="p">硬盘分区故障修复全攻略:</p>
<p class="p">由于分区故障，很有可能开启计算机时无法进入熟悉的Windows界面，甚至通过系统启动盘也无法正常识别硬盘，这时候大家肯定都会束手无策吧。</p>
<p class="p">如果贸然对硬盘进行重新分区操作，固然能够彻底解决问题，不过硬盘中的所有重要资料也会随之灰飞烟灭。如果你不幸遇到硬盘的分区故障，先别急着重新分区，按照下文介绍的方法来尝试一下，没准儿会有个意外的惊喜呢。</p>
<p class="p">分区表为何会出故障</p>
<p class="p">在分区表被破坏后，启动系统时往往会出现“Non-System disk or disk error，replace disk
and press a key to reboot”(非系统盘或盘出错)、“Error Loading Operating System”(装入DOS引导记录错误)或者“No
ROM Basic，System Halted”(不能进入ROM Basic，系统停止响应)等提示信息。那么分区表故障究竟是如何发生的呢?</p>
<p class="p">1.病毒引发故障</p>
<p class="p">病毒导致分区表损坏是最为典型的故障之一。比如典型的CIH病毒的变种除了攻击主板的BIOS之外，同时也会对分区表进行破坏，而且还有很多引导区病毒也会对分区表进行破坏。</p>
<p class="p">2.环境问题导致</p>
<p class="p">如今的Windows 2000/XP都支持NTFS文件格式，而且程序默认的都是采用这种文件格式来安装系统，如果对硬盘进行分区转换或者是划分NTFS分区时意外断电或者死机，那么很有可能导致分区表损坏。而且在通过PQMagic(分区魔术师)之类的第三方分区软件调整硬盘分区容量、转换分区格式的时候也存在一定风险，如果死机或者断电也会导致硬盘分区表故障，甚至有可能丢失硬盘中的所有数据。</p>
<p class="p">3.操作不当</p>
<p class="p">如果在一块硬盘上同时安装了多个操作系统，那么在卸载的时候就有可能导致分区表故障，比如在同时安装了Windows 2000和Windows
98的计算机上，直接删除Windows 2000内核会导致分区表的错误。另外，在删除分区的时候如果没有先删除扩展分区，而是直接删除主分区，也会出现无法正确读出分区卷标的故障。</p>
<p class="p">分区表故障急救策略</p>
<p class="p">1.查杀病毒</p>
<p class="p">如果是由于引导区病毒造成分区表故障，则可以借助KV3000、瑞星、金山等杀毒软件提供的引导软盘启动计算机，接着在DOS环境中对系统进行病毒查杀操作。比如用KV3000的引导盘启动计算机之后输入“KV3000/K”命令进行病毒扫描，如果发现引导区存在病毒，则程序会自动进行查杀清理，建议同时对整个系统进行完整的扫描以查找出隐藏的病毒。一般说来，将引导区中残留的病毒清除之后即可恢复计算机的正常使用。</p>
<p class="p">提示：使用软盘引导计算机之前一定要将软盘的写保护关闭，否则有可能导致病毒感染软盘。</p>
<p class="p">2.用Fdisk命令修复</p>
<p class="p">Fdisk不仅是一个分区程序，它还有着非常便捷的恢复主引导扇区功能，而且它只修改主引导扇区，对其他扇区并不进行写操作，因此对于那些还在使用Windows
9x的朋友而言无疑是个非常理想的分区表修复工具。通过Fdisk修复主引导区的时候，先用Windows 98启动盘启动系统，在提示符下输入“Fdisk
/mbr”命令即可覆盖主引导区记录。</p>
<p class="p">提示：“Fdisk /mbr”命令只是恢复主分区表，并不会对它重新构建，因此只适用于主引导区记录被引导区型病毒破坏或主引导记录代码丢失，但主分区表并未损坏的情况使用。而且这个命令并不适用于清除所有引导型病毒，因此使用的时候需要注意。</p>
<p class="p">3.用Fixmbr修复引导记录</p>
<p class="p">在Windows 2000/XP中，我们一般会用到故障恢复控制台集成的一些增强命令，比如Fixmbr用于修复和替换指定驱动器的主引导记录、Fixboot用于修复知道驱动器的引导扇区、Diskpart能够增加或者删除硬盘中的分区、Expand可以从指定的CAB源文件中提取出丢失的文件、Listsvc可以创建一个服务列表并显示出服务当前的启动状态、Disable和Enable分别用于禁止和允许一项服务或者硬件设备等等，而且输入“help”命令可以查看到所有的控制命令以及命令的详细解释。</p>
<p class="p">比如输入“fixmbr”命令可以让控制台对当前系统的主引导记录进行检查，然后在“确定要写入一个新的主启动记录吗?”后面输入“Y”进行确认，这样就完成了主引导记录的修复。</p>
<p class="p">4.更换工具调整分区</p>
<p class="p">在删除分区或者是重新创建分区的时候，如果遇到意外原因死机或断电，这时候再使用原先的工具可能无法识别当前硬盘的分区表，必须更换另外一款分区表软件进行修复。比如我们通过Fdisk分区时意外死机，这时候再通过Fdisk就无法顺利进行，可以采用PQMagic之类的第三方分区软件解决。另外需要提醒大家注意的是，分区表对于系统的正常稳定运行影响非常大，一般情况下最好不要采用DM之类快速分区格式化软件，否则有可能导致后期使用过程中频频出现意想不到的麻烦。</p>
<p class="p">5.通过KV3000硬盘救护王修复</p>
<p class="p">KV3000硬盘救护王是KV3000套件中提供的一款硬盘急救软件，在分区表出现故障的时候可以通过它进行修复。用KV3000软盘引导计算机之后，在DOS提示符状态下输入“KV3000”命令，并且从出现的主菜单中按下“F10”键，此时可以看见程序对系统的有关参数和硬盘分区表快速测试的画面。如果硬盘分区表正常，则会显示“Hard
Disk Partition table - OK ”信息，否则会依据分区表故障类型给出相应的信息，这时可以按下“F6”按钮查看硬盘分区表，或者直接按下“Y”按钮进行引导扇区的修复操作。而且为了安全起见，程序在修复前会让你先备份当前的硬盘分区表，然后才会真正对硬盘分区表进行修复操作。</p>
<p class="p">提示：但是如果硬盘只有一个分区，而且文件分配表和文件根目录表已经被病毒严重破坏，那么即使恢复了C盘分区表也不能使C盘引导，此时需要手工配合其他专用修复软件来恢复数据。如果还有D、E等扩展分区，KV3000一般都能找回后面没有被破坏的分区并重建一个新的硬盘主分区表，这时再用DOS系统软盘引导计算机就可进入硬盘的D、E等分区。</p>
<p class="p">虽然分区表故障属于系统软故障，也可以通过上述提及的方法进行尝试性修复，但这毕竟不是灵丹妙药，对于一些破坏性非常强的分区表病毒或者是由于其它原因导致分区表损坏，这时只能通过重新对硬盘分区来解决。</p>
<p class="p">用KV3000备份恢复分区表</p>
<p class="p">KV3000虽然是个防杀病毒软件，它也具有非常强的分区修复的能力，而且它还能进行系统分区的备份。这样，即使硬盘上的分区表全部损坏，我们还能用备份在软盘上的分区表进行修复。</p>
<p class="p">1.备份硬盘主引导记录</p>
<p class="p">通过KV3000备份的时候，事先要确认计算机中没有病毒，接着用KV3000软盘引导计算机并输入“KV3000/B”命令，此时程序将向A盘备份一个无病毒的硬盘主引导信息文件，备份的文件有2个，其文件名称分别是HDPT.DAT和HFBOOT.DAT。</p>
<p class="p">但是需要提醒大家注意的是，备份得到的硬盘主引导信息只适用于这款硬盘以及当前的分区模式，如果用于不同容量或者相同容量但是分区模式不同的硬盘，将会对硬盘的分区表造成破坏，因此建议备份之后，在软盘的标签上写明机器型号、硬盘容量、分区大小等信息后保存。</p>
<p class="p">2.恢复硬盘主引导记录</p>
<p class="p">当硬盘主引导信息被病毒破坏或主引导记录损坏，硬盘不能启动时，就可以使用干净的系统盘启动。在KV3000的A盘下输入“KV3000/HDPT.DAT”，这样就能将备份在软盘上的原主引导信息内容恢复到硬盘中，不过恢复用的备份文件必须是从该硬盘上备份的，这样可以解决大部分主引导信息损坏、系统不能启动的问题。同样需要提醒大家注意的是，恢复硬盘主引导记录的时候不要将它用于其他硬盘，而且在硬盘重新分区时也不能进行恢复操作。</p>
<p class="p">用Disk Genius备份恢复分区表</p>
<p class="p">Disk Genius不仅提供了诸如建立、激活、删除、隐藏分区之类的基本硬盘分区管理功能，还具有分区表备份和恢复、分区参数修改、硬盘主引导记录修复、重建分区表等强大的分区维护功能。此外，它还具有分区格式化、分区无损调整、硬盘表面扫描、扇区拷贝、彻底清除扇区数据等实用功能。</p>
<p class="p">提示：如果只是想利用Disk Genius查看、备份硬盘分区信息，可以直接在Windows下运行它，但如果涉及更改分区参数的写盘操作，则必须在纯DOS环境下运行，而且在使用前应将CMOS中的“Anti
Virus”选项设为“Disable”。</p>
<p class="p">运行Disk Genius后，程序将自动读取硬盘的分区信息，并在屏幕上以图表的形式显示硬盘分区情况。如图所示，这是Disk Genius检测笔者硬盘得到的分区信息结构图。其中左侧的柱状图显示硬盘上各分区的位置及大小，屏幕右侧用表格的形式显示了各分区的类型及其具体参数，包括分区的引导标志、系统标志、分区起始和终止柱面号、扇区号、磁头号。在柱状图与参数表格之间，有一个动态连线指示了它们之间的对应关系。可以通过鼠标在柱状图或表格中点击来选择一个分区，也可以用键盘上的光标移
动键来选择当前分区。</p>
<p class="p">需要备份分区表的时候，按下“F9”按键或者运行“工具→备份分区表”命令，并且在弹出的对话框中输入文件名即可备份当前分区表。按下“F10”按键或者运行“工具→恢复分区表”命令，然后输入文件名，软件将读入指定的分区表备份文件并更新屏幕显示，确认无误后即可将备份的分区表恢复到硬盘。</p>
<p class="p">保护好分区表</p>
<p class="p">由于分区表故障属于软故障，因此我们在日常使用计算机的时候需要养成正确的使用习惯，这样才能防患于未然，尽可能减少分区表出故障的可能性。</p>
<p class="p">1.计算机中一定要安装杀毒软件，这不仅可以防止各种常见的病毒入侵计算机，更能够减少使用软盘或者光盘时，分区表误中病毒的可能性。而且在一般情况下，尽量不要使用来源不明的软盘与光盘。</p>
<p class="p">2.新购置的硬盘建议在安装Windows 2000/XP的时候采用内置程序进行分区，或者借助Fdisk程序进行分区，尽量不要用第三方快速分区格式化一体的程序，这有可能导致日后使用计算机过程中出现故障。</p>
<p class="p">3.对分区进行划分或者调整操作的时候，尽量选择电源比较稳定的时间段，有可能的情况下最好能够使用外接UPS电源。</p>
<p class="p">4.在计算机稳定运行的情况下，尽可能不要对分区表进行调整和转换操作，尤其是NTFS分区，在进行上述操作之前一定要备份分区中的重要数据文件。</p>
<p class="p">5.安装好操作系统之后，建议对分区表进行备份，以防出现故障时能够及时恢复。</p>
<p class="p">看完上述介绍的内容之后，相信大家遇到分区表故障的时候也不会一筹莫展了吧，希望分区表故障不再困扰我们正常使用自己的计算机。</p>
<p class="p">小知识</p>
<p class="p">当通过Fdisk或其他分区工具对硬盘进行分区时，分区软件会在硬盘0柱面0磁头1扇区建立一个64字节的分区表，包括硬盘主引导记录MBR（Main
Boot Record）和分区表DPT（Disk Partition Table）。其中主引导记录MBR的作用就是检查分区表是否正确以及确定哪个分区为引导分区，并在程序结束时把该分区的启动程序调入内存加以执行；而分区表DPT则以80H或00H为开始标志，以55AAH为结束标志，位于主引导扇区的最末端。整个分区表决定了硬盘中的分区数量，每个分区的起始及终止扇区、大小以及是否为活动分区等</p>
<p class="p"></p>
<p class="p">参见</p>
<p class="p"><a class="xref" href="http://zhidao.baidu.com/question/7236607" target="_blank" rel="external noopener">请问各位大虾，硬盘串口与并口有何区别？偶是菜鸟|</a></p>
<p class="p"><a class="xref" href="http://hi.baidu.com/lshqqqqq/blog/item/5ef0bf518da5de848c5430f5.html" target="_blank" rel="external noopener">使用GHOST恢复GHO文件到C盘时出现Decompression error,Abort?|</a>&nbsp;<a class="xref" href="http://wenwen.soso.com/z/q120388202.htm" target="_blank" rel="external noopener">CRC失败,文件被破坏，高手进，不要复制别人的!|</a>&nbsp;<a class="xref" href="http://hi.baidu.com/lishengmao/blog/item/9fb69ea2f5f536a7cbefd069.html" target="_blank" rel="external noopener">CRC 失败,文件被破坏,修复办法|</a></p>
<p class="p"><a class="xref" href="http://spfdisk.sourceforge.net/note.htm" target="_blank" rel="external noopener">超强分区工具SPFDisk</a></p>
<p class="p"><a class="xref" href="http://www.it.com.cn/f/edu/0411/10/45891.htm" target="_blank" rel="external noopener">打造功能齐全的超级启动盘</a></p>
</div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>父主题：</strong> <a class="link" href="%E7%A1%AC%E4%BB%B6%E5%AE%89%E5%85%A8.html">硬件安全</a></div></div></nav></article></main></body></html>